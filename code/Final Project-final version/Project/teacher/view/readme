all code for view assignment
